language: bash
sudo: required
services:
- docker
env:
  matrix:
  - IMAGE_NAME=limed/travis-test
  - COMMIT_HASH=${TRAVIS_COMMIT::8}

before_install:
- docker logout
- echo $IMAGE_NAME
- echo $COMMIT_HASH

stages:
- name: Build Docker Image
  if: branch = master

jobs:
  include:
  - stage: Build Docker Image
    script:
    - docker build -t $IMAGE_NAME:latest .
    - docker images
